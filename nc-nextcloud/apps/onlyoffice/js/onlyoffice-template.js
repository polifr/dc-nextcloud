!function(e,l){OCA.Onlyoffice=_.extend({AppName:"onlyoffice",templates:null},OCA.Onlyoffice),OCA.Onlyoffice.OpenTemplatePicker=function(a,c,o){e("#onlyoffice-template-picker").remove(),e.get(l.filePath(OCA.Onlyoffice.AppName,"templates","templatePicker.html"),(function(l){var i=e(l).octemplate({dialog_name:"onlyoffice-template-picker",dialog_title:t(OCA.Onlyoffice.AppName,"Select template")});OCA.Onlyoffice.AttachTemplates(i,o),e("body").append(i),e("#onlyoffice-template-picker").ocdialog({closeOnEscape:!0,modal:!0,buttons:[{text:t("core","Cancel"),classes:"cancel",click:function(){e(this).ocdialog("close")}},{text:t(OCA.Onlyoffice.AppName,"Create"),classes:"primary",click:function(){var t=this.dataset.templateId,l=OCA.Files.App.fileList;OCA.Onlyoffice.CreateFile(a+c,l,t),e(this).ocdialog("close")}}]})}))},OCA.Onlyoffice.GetTemplates=function(){null==OCA.Onlyoffice.templates&&e.get(l.generateUrl("apps/"+OCA.Onlyoffice.AppName+"/ajax/template"),(function(e){e.error?l.Notification.show(e.error,{type:"error",timeout:3}):OCA.Onlyoffice.templates=e}))},OCA.Onlyoffice.AddTemplate=function(t,a){var c=new FormData;c.append("file",t),e.ajax({method:"POST",url:l.generateUrl("apps/"+OCA.Onlyoffice.AppName+"/ajax/template"),data:c,processData:!1,contentType:!1,success:function(e){e.error?a(null,e.error):a(e,null)}})},OCA.Onlyoffice.DeleteTemplate=function(t,a){e.ajax({method:"DELETE",url:l.generateUrl("apps/"+OCA.Onlyoffice.AppName+"/ajax/template?templateId={templateId}",{templateId:t}),success:function(e){e&&a(e)}})},OCA.Onlyoffice.AttachTemplates=function(l,a){var c=l[0].querySelector(".onlyoffice-template-item");OCA.Onlyoffice.templates.forEach((t=>{if(t.type===a){var o=c.cloneNode(!0);e(o.querySelector("label")).attr("for","template_picker-"+t.id),o.querySelector("input").id="template_picker-"+t.id,o.querySelector("img").src="../../core/img/filetypes/x-office-"+t.type+".svg",o.querySelector("p").textContent=t.name,o.onclick=function(){l[0].dataset.templateId=t.id},l[0].querySelector(".onlyoffice-template-container").appendChild(o)}})),e(c.querySelector("label")).attr("for","template_picker-0"),c.querySelector("input").id="template_picker-0",c.querySelector("input").checked=!0,c.querySelector("img").src="../../core/img/filetypes/x-office-"+a+".svg",c.querySelector("p").textContent=t(OCA.Onlyoffice.AppName,"Empty"),c.onclick=function(){l[0].dataset.templateId="0"}},OCA.Onlyoffice.AttachItemTemplate=function(t){e.get(l.filePath(OCA.Onlyoffice.AppName,"templates","templateItem.html"),(function(l){(l=e(l)).attr("data-id",t.id),l.children("img").attr("src","../../core/img/filetypes/x-office-"+t.type+".svg"),l.children("p").text(t.name),e(".onlyoffice-template-container").append(l)}))},OCA.Onlyoffice.TemplateExist=function(e){return OCA.Onlyoffice.templates.some((t=>t.type===e))}}(jQuery,OC);
//# sourceMappingURL=onlyoffice-template.js.map?v=a494e0c3462ba77fbe37